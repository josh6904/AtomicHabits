        <!-- Updated Stats Row with Heatmap Container -->
        <section class="stats-grid">
            <div class="stat-card">
                <div class="stat-label">Current Streak</div>
                <div class="stat-value" id="globalStreak">0</div>
                <div style="font-size: 0.8rem; color: var(--text-secondary);">days</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Completion Rate</div>
                <div class="stat-value" id="completionRate">0%</div>
            </div>
            <div class="stat-card" style="grid-column: span 1;">
                <div class="stat-label">Consistency (Last 30 Days)</div>
                <div id="heatmapContainer" style="display: flex; gap: 4px; margin-top: 10px; flex-wrap: wrap; height: 12px; overflow: hidden; border-radius: 2px;">
                    <!-- Heatmap squares generated here -->
                </div>
            </div>
        </section>

        <!-- ... (Main Dashboard Layout stays the same) ... -->

            <!-- Updated Right Column: Add Habit with Identity -->
            <aside>
                <div class="add-habit-card">
                    <h2 class="section-title" style="margin-bottom: 1.5rem;">New Identity</h2>
                    <form id="addHabitForm">
                        <div class="form-group">
                            <label for="habitIdentity">I am a...</label>
                            <input type="text" id="habitIdentity" placeholder="e.g., Healthy Person, Writer, Coder" autocomplete="off">
                        </div>
                        <div class="form-group">
                            <label for="habitName">I will...</label>
                            <input type="text" id="habitName" placeholder="e.g., Read for 10 minutes" required autocomplete="off">
                        </div>
                        
                        <div class="form-group">
                            <label for="habitStack">After I [Current Habit]...</label>
                            <input type="text" id="habitStack" placeholder="e.g., After I pour my coffee" autocomplete="off">
                        </div>

                        <button type="submit" class="btn-primary">
                            <span>+</span> Create Habit
                        </button>
                    </form>
                    
                    <!-- Confetti Canvas (Hidden by default, positioned absolute) -->
                    <canvas id="confetti" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999;"></canvas>

                    <div style="margin-top: 2rem; border-top: 1px solid var(--bg-input); padding-top: 1rem;">
                        <button onclick="app.resetData()" style="width: 100%; background: transparent; border: 1px solid var(--bg-input); color: var(--text-secondary); padding: 0.5rem; border-radius: 6px; cursor: pointer; font-size: 0.8rem;">
                            Reset All Data
                        </button>
                    </div>
                </div>
            </aside>
